import e from'./../../../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from"../../token.js";import{APIS as n}from"../../../constants.js";import{__generator as s}from'./../../../external/tslib/tslib.es6.js';var i,r=(i=e((function(i){var r,o;return s(this,(function(c){switch(c.label){case 0:return[4,t.getAccessToken()];case 1:return r=c.sent(),o="id,name,user_id_by_oa,is_sensitive",o=i?"".concat(o,",picture.type(").concat(i,")"):"".concat(o,",picture"),[4,fetch("".concat(n.GET_USER_INFO,"?fields=").concat(o),{headers:{access_token:r||""}}).then(function(){var t=e((function(e){var t,n,i,r;return s(this,(function(s){switch(s.label){case 0:return[4,e.json()];case 1:return i=s.sent(),r=null==i?void 0:i.user_id_by_oa,[2,{id:null==i?void 0:i.id,name:null==i?void 0:i.name,avatar:null==i||null===(t=i.picture)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.url,idByOA:r,followedOA:!!r,isSensitive:null==i?void 0:i.is_sensitive}]}}))}));return function(e){return t.apply(this,arguments)}}())];case 2:return[2,c.sent()]}}))})),function(e){return i.apply(this,arguments)});export{r as default};
