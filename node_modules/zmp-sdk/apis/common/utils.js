import r from'./../external/@swc/helpers/src/_async_to_generator.mjs.js';import t from"../utils/query-string.js";import{APIS as e}from"../constants.js";import n from"../utils/lodash.js";import o from"../utils/request.js";import{__generator as a}from'./../external/tslib/tslib.es6.js';var s,i=(s=r((function(r,o,s){var i,c,d,p;return a(this,(function(a){switch(a.label){case 0:return i={appId:r,versionStatus:o},n.isUndefined(s)||(i.currentVersion=s),c=t.appendToUrl(e.GET_APP_INFO,i),[4,fetch(c,{credentials:"include"})];case 1:return(d=a.sent()).ok?[4,d.json()]:[3,3];case 2:if((p=a.sent()).err<0||!p.data)throw new Error(p);return[2,{name:p.data.name,version:p.data.version,description:p.data.description,appUrl:p.data.appUrl,qrCodeUrl:p.data.qrCodeUrl,logoUrl:p.data.logoUrl}];case 3:throw new Error("Can't get app info")}}))})),function(r,t,e){return s.apply(this,arguments)});function c(r){try{var t=r.map((function(r){return{action:r.action,error:r.error,message:r.message,data:r.data}}));o.execute(e.SEND_ACTION_LOG,"post",{appId:window.APP_ID,data:JSON.stringify(t)},(function(){})),window.zmpSentry&&window.zmpSentry.captureMessage("Result from native",{extra:{data:r}})}catch(r){}}var d=function(r){return r.replace(/[A-Z]/g,(function(r){return"_".concat(r.toLowerCase())}))};export{d as camelToSnakeCase,i as getAppInfo,c as sendLogData};
