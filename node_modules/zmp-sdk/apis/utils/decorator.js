import r from'./../external/@swc/helpers/src/_to_consumable_array.mjs.js';import{generateErrorMessage as o}from"./common.js";import{errorHandler as i}from"./errorHandler.js";import s from"./lodash.js";import{apiResponse as n}from"./response.js";function e(e,t,a,u){var l,c,f=Array.isArray(a)&&a.length>0&&(null===(l=a[0])||void 0===l?void 0:l.success),m=Array.isArray(a)&&a.length>0&&(null===(c=a[0])||void 0===c?void 0:c.fail);try{var d=a;t.length>0&&t.forEach((function(r,s){var t=r.safeParse(a[s]);if(!t.success){var u,l=null===(u=t.error)||void 0===u?void 0:u.issues,c=o(l),f=n.error.badRequest(c);throw f.detail=l,i(f,e)}d.push(t.data)}));var v=u.apply(void 0,r(d));return s.isPromise(v)?new Promise((function(r,o){v.then((function(o){if(!s.isNull(f)&&s.isFunction(f))return f(o);r(v)})).catch((function(r){var n=i(r,e);if(!s.isNull(m)&&s.isFunction(m))return m(n);o(n)}))})):v}catch(r){if(!s.isNull(m)&&s.isFunction(m))return m(r);throw i(r,e)}}export{e as functionHandler};
